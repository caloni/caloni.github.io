<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Blogue do Caloni</title>
<meta name="author" content="Caloni" />
<meta name="generator" content="https://github.com/caloni/journal">
<meta property="og:title" content="Blogue do Caloni"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="http://www.caloni.com.br"/>
<meta property="og:image" content="/img/about-brand.png"/>
<meta property="og:description" content="Write for computers, people and food."/>
<link href="/index.xml" rel="feed" type="application/rss+xml" title="Blogue do Caloni"/>
<link rel="stylesheet" type="text/css" href="/css/custom.css"/>
<link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
<script src="/js/jquery-1.12.4.js"></script>
<script src="/js/jquery-ui.js"></script>
<script src="/js/copy_clipboard.js"></script>
<script>
var quick_search_posts = [ 
 ]; 
</script>
<script src="/js/quick_search.js"></script>
<script src="/js/list.js"></script>
<link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
<nav class="navbar has-shadow is-white"
role="navigation" aria-label="main navigation">
<div class="container">
<div class="navbar-brand">
&nbsp;
<a class="navbar-item" href="index.html">
<div class="is-4"><b>caloni::reversing</b></div>
</a>
</div>
</div>
</nav>
<div class="container">
<div class="column">
<div style="min-height:56vh">
<div style="padding-bottom: 1em;"></div>
<input type="text" name="filter" value="" id="filter" placeholder="enter to select" style="width: 100%; font-size: 1.5rem; margin-top: 1em; margin-bottom: 0.5em;" title=""/></br>
<button id="filterbutton" style="font-size: 1rem;" onclick="ApplyFilter($('#filter').val());">select</button>
<button id="removebutton" style="font-size: 1rem;" onclick="ApplyNotFilter($('#filter').val());">remove</button>
<button id="randombutton" style="font-size: 1rem;" onclick="window.location = randomPost;">random</button>
<div><big><b><span style="visibility: hidden; padding: 5px;" name="results" id="results">...</span></b></big></div>
<table class="sortable" style="width: 100%;">
<tr><td>
<b><a href="2023-11.html#encontrando_o_hive_de_aps_uwp">Encontrando o hive de aps UWP</a></b>
<small><i>2023-11-04 windbg reversing  Aplicativos UWP não possuem direitos de administração. Por isso eles não conseguem carregar um hive de registro como especificado pela API do Windows. A solução, portanto, é mudar o sistema operacional.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-10.html#como_saber_quais_classes_winrt_estao_sendo_ativadas">Como saber quais classes winrt estão sendo ativadas</a></b>
<small><i>2023-10-05 windbg reversing  Quando analisando o comportamento de programas Windows que usam winrt é sempre útil dar uma olhada nas classes sendo ativadas. Uma função-chave para isso é a [RoGetActivationFactory]: // Gets the activation factory for the specified runtime class.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-10.html#setando_proxima_instrucao_no_windbg">Setando próxima instrução no WinDbg</a></b>
<small><i>2023-10-04 debugging reversing windbg  Procurando onde setar a próxima instrução no WinDbg? Dica: curiosamente ela não fica no meio dos comandos de debug, mas no menu Edit. Selecione a linha desejada no assembly ou código-fonte para onde deseja alterar o fluxo de execução e use a opção "Set Current Instruction".</small></i>
</td></tr>
<tr><td>
<b><a href="2023-10.html#como_investigar_a_vtable_de_uma_interface_ou_objeto_com">Como investigar a vtable de uma interface ou objeto COM</a></b>
<small><i>2023-10-03 windbg reversing  Uma vez que você encontre onde está a `vtable` -- por exemplo, como o primeiro parâmetro da chamada em um método, vide [convenção de chamadas do x64] -- liste no WinDbg os endereços contidos neste endereço (o parâmetro `L` é a quantidade de bytes para mostrar):</small></i>
</td></tr>
<tr><td>
<b><a href="2023-10.html#como_inspecionar_chamadas_com_remotas_olhando_a_informacao_de_marshaling">Como inspecionar chamadas COM remotas olhando a informação de marshaling</a></b>
<small><i>2023-10-03 windbg reversing  Esta dica é para começar uma análise de reversa quando você deseja entender quais informações estão sendo trafegadas por uma chamada COM remota, ou seja, entre processos distintos. Isso vale para WinRT e para o COM tradicional. De uma forma ou de outra a chamada irá passar por `combase!NdrExtpProxySendReceive` e outras funções de RPC relacionadas, além das novas funções de ALPC, em especial `ntdll!NtAlpcSendWaitReceivePort`. Existem várias de marshaling e unmarshaling, mas o mais importante é centralizar na função que envia e recebe bytes e analisar estes bytes. Eles são a versão serializada dos parâmetro sendo trafegados.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-10.html#como_colocar_breakpoint_nas_chamadas_a_outputdebugstring">Como colocar breakpoint nas chamadas a OutputDebugString</a></b>
<small><i>2023-10-03 windbg reversing  Usando `sxe out` é possível parar a execução de um programa sendo depurado pelo WinDbg sempre que ele disparar alguma saída para o depurador através da função OutputDebugString. Isso permite em nossa sessão de debug descobrir de onde vem a chamada, pois o depurador para e podemos usar o comando `k` para dar uma espiada.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-09.html#uwp_apps_nao_funcionam_com_proxy_de_loopback_resolvido">UWP apps não funcionam com proxy de loopback (resolvido)</a></b>
<small><i>2023-09-07 reversing debugging computer  Durante minha pesquisa para entender como funciona o login no Azure AD chegou a mim a informação muito pertinente de que proxies locais não funcionam por padrão com aplicativos UWP. Isso acontece porque além dos apps rodarem dentro de um AppContainer isolado com seu próprio SID, os privilégios desse SID por padrão são muito limitados. Talvez no futuro isso funcione, mas no momento não.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-09.html#traffic">TRAFFIC</a></b>
<small><i>2023-09-07 blogging reversing debugging computer  Observei esta anotação em meu journal de muitos anos atrás (2009) e ela continua atual. Baseado em um powerpoint do cientista da computação Andreas Zeller, autor de Why Programs Fail, este acrônimo é um caminho fácil de lembrar quando precisamos encontrar um bug no sistema. Eu lembro que estava pensando até em escrever um artigo na época, mas ainda estava trabalhando a questão de como traduzir as siglas para o português.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-08.html#hstring">Explorando a HSTRING</a></b>
<small><i>2023-08-21 blogging reversing computer  Estava me enveredando hoje nos bytes usados para montar e demonstar os argumentos de uma interface COM proxy da WinRT quando quis saber qual era o leiaute da nova string do Windows, a HSTRING, usada na WinRT e em todo o ecossistema dos Universal apps.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-08.html#descobrindo_ativacao_classes_winrt">Descobrir ativação de classes WinRT</a></b>
<small><i>2023-08-13 reversing computer  A Windows Runtime nada mais é que o COM repaginado. O COM já previa o uso de proxies para comunicação remota entre processos. A WinRT adicionou mais uma interface e uma função. Vou neste post descrever o processo pelo qual descobri como funciona o registro de um dispositivo no Azure Active Directory (AAD).</small></i>
</td></tr>
<tr><td>
<b><a href="2023-07.html#boasvindas_ao_canal_de_reversing_do_telegrama">Boas-vindas ao canal de Reversing do Telegrama</a></b>
<small><i>2023-07-21 blogging reversing computer  Olá, pessoas do Telegrão que entraram [no canal]. Bora começar a fazer baixarias pra ver se anima? Bom, acho que a primeira coisa que todo reversing de computador precisa fazer é gerar sua primeira telinha azul com uma poesia. Vamos lá?</small></i>
</td></tr>
<tr><td>
<b><a href="2023-06.html#reversing">Reversing: Secrets of Reverse Engineering</a></b>
<small><i>2023-06-25 antidebug reversing books  Publicado pela Wiley em 2005, bem na época que comecei a me enveredar no trabalho com análise de trojans e técnicas antidebugging, o livro de Eldad Eilam veio bem a calhar na época e agora virá bem a calhar novamente, pois irei voltar a trabalhar na área. Naquela época começavam a surgir os ataques aos bancos online no Brasil e existia até um tookit que espalhava uma técnica ou duas entre os laranjas que queriam tirar uma casquinha da nova onda. O livro de Eilam busca juntar cada aspecto da engenharia reversa em um apanhado que irá nos dar insights e modus operandi de como proceder para cada tipo de desafio.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-06.html#critical_sections_and_outlook">Critical Sections and Outlook</a></b>
<small><i>2023-06-15 reversing english debugging computer  Today was a happy crush analysis day, because I receive an Outlook memory dump the moment it frooze the main window in the beginning of the process. I asked for one because it could be useful to another analysis I was doing with Office server communication.</small></i>
</td></tr>
<tr><td>
<b><a href="2023-06.html#onboarding_no_baixo_nivel">OnBoarding no baixo nível</a></b>
<small><i>2023-06-06 lists reversing computer  Uhu! Estou de volta para as baixarias =). Irei trabalhar com engenharia reversa, serviços e drivers no Windows, talvez algumas telas azuis da morte e alguns travamentos inexplicáveis. Ou seja, só diversão.</small></i>
</td></tr>
</table>
<span style="float: left;">
</span>
</div>
</div>
</section>
<footer class="footer">
<div class="container">
</div>
<div class="intentionally-blank"></div>
</footer>
</body>
</html>
